{"version":3,"sources":["webpack:///../src/index.js","webpack:///./routes/language-tools/tkk-hash.js","webpack:///./routes/language-tools/index.js"],"names":["getHookState","index","type","options","_hook","currentComponent","currentHook","hooks","__hooks","_list","_pendingEffects","length","push","useState","initialState","reducer","init","hookState","currentIndex","_component","_value","invokeOrReturn","nextValue","action","setState","useReducer","useEffect","callback","args","state","_skipEffects","argsChanged","_args","flushAfterPaintEffects","afterPaintEffects","some","component","_parentDom","forEach","invokeCleanup","invokeEffect","e","_catchError","_vnode","hook","_cleanup","result","oldArgs","newArgs","arg","f","prevRaf","oldBeforeRender","_render","oldAfterDiff","diffed","oldCommit","_commit","oldBeforeUnmount","unmount","vnode","c","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","setTimeout","window","commitQueue","_renderCallbacks","filter","cb","shiftLeftOrRightThenSumOrXor","num","opArray","reduce","acc","opString","op1","op2","xd","assert","shiftAmount","charCodeAt","Number","hexCharAsNumber","mask","cond","err","Error","module","exports","query","windowTkk","encondindRound2","bytesArray","g","l","transformQuery","d","split","tkkIndex","tkkKey","encondingRound1","current","encondingRound2","normalizedResult","toString","getTkk","setTkk","response","fetch","method","ok","json","ls","setItem","tkk","Date","status","LanguageTools","search","setSearch","googleWords","setGoogleWords","valueOf","getItem","value","onInput","event","target","onClick","encoded_search","words","encodeURIComponent","Headers","append","calcHash","map","pos","word","frequency","localStorage"],"mappings":"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","file":"route-language-tools.chunk.f530b.js","sourcesContent":["import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tif (currentComponent.__hooks) {\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\tcurrentComponent.__hooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\tif (hooks._pendingEffects.length) {\n\t\t\tafterPaint(afterPaintEffects.push(c));\n\t\t}\n\t}\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\ttry {\n\t\t\thooks._list.forEach(hook => hook._cleanup && hook._cleanup());\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {import('./internal').HookState}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} initialState\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value[0] = nextValue;\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') ref(createHandle());\n\t\t\telse if (ref) ref.current = createHandle();\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t\treturn (state._value = factory());\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\nexport function useErrorBoundary(cb) {\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = err => {\n\t\t\tif (state._value) state._value(err);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tafterPaintEffects.some(component => {\n\t\tif (component._parentDom) {\n\t\t\ttry {\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t} catch (e) {\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t\toptions._catchError(e, component._vnode);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\tafterPaintEffects = [];\n}\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (typeof window != 'undefined') {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\tif (hook._cleanup) hook._cleanup();\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\tconst result = hook._value();\n\tif (typeof result == 'function') hook._cleanup = result;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn !oldArgs || newArgs.some((arg, index) => arg !== oldArgs[index]);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n","// Taken from https://github.com/guyrotem/google-translate-server/blob/master/scripts/hash/tk-hash.js\nfunction shiftLeftOrRightThenSumOrXor(num, opArray) {\n  return opArray.reduce((acc, opString) => {\n    var op1 = opString[1]; //\t'+' | '-' ~ SUM | XOR\n    var op2 = opString[0]; //\t'+' | '^' ~ SLL | SRL\n    var xd = opString[2]; //\t[0-9a-f]\n\n    assert(op1 === \"+\" || op1 === \"-\", \"Invalid OP: \" + op1);\n    assert(op2 === \"+\" || op2 === \"^\", \"Invalid OP: \" + op2);\n    assert(\n      (\"0\" <= xd && xd <= \"9\") || (\"a\" <= xd && xd <= \"f\"),\n      \"Not an 0x? value: \" + xd\n    );\n\n    var shiftAmount = hexCharAsNumber(xd);\n    var mask = op1 == \"+\" ? acc >>> shiftAmount : acc << shiftAmount;\n    return op2 == \"+\" ? (acc + mask) & 0xffffffff : acc ^ mask;\n  }, num);\n}\n\nfunction assert(cond, err) {\n  if (!cond) {\n    throw Error(err);\n  }\n}\n\nfunction hexCharAsNumber(xd) {\n  return xd >= \"a\" ? xd.charCodeAt(0) - 87 : Number(xd);\n}\n\nfunction transformQuery(query) {\n  for (var e = [], f = 0, g = 0; g < query.length; g++) {\n    var l = query.charCodeAt(g);\n    if (l < 128) {\n      e[f++] = l; //\t0{l[6-0]}\n    } else if (l < 2048) {\n      e[f++] = (l >> 6) | 0xc0; //\t110{l[10-6]}\n      e[f++] = (l & 0x3f) | 0x80; //\t10{l[5-0]}\n    } else if (\n      0xd800 == (l & 0xfc00) &&\n      g + 1 < query.length &&\n      0xdc00 == (query.charCodeAt(g + 1) & 0xfc00)\n    ) {\n      //\tthat's pretty rare... (avoid ovf?)\n      l = (1 << 16) + ((l & 0x03ff) << 10) + (query.charCodeAt(++g) & 0x03ff);\n      e[f++] = (l >> 18) | 0xf0; //\t111100{l[9-8*]}\n      e[f++] = ((l >> 12) & 0x3f) | 0x80; //\t10{l[7*-2]}\n      e[f++] = (l & 0x3f) | 0x80; //\t10{(l+1)[5-0]}\n    } else {\n      e[f++] = (l >> 12) | 0xe0; //\t1110{l[15-12]}\n      e[f++] = ((l >> 6) & 0x3f) | 0x80; //\t10{l[11-6]}\n      e[f++] = (l & 0x3f) | 0x80; //\t10{l[5-0]}\n    }\n  }\n  return e;\n}\n\nfunction normalizeHash(encondindRound2) {\n  if (encondindRound2 < 0) {\n    encondindRound2 = (encondindRound2 & 0x7fffffff) + 0x80000000;\n  }\n  return encondindRound2 % 1e6;\n}\n\n/*\n/\tEXAMPLE:\n/\n/\tINPUT: query: 'hola', windowTkk: '409837.2120040981'\n/\tOUTPUT: '70528.480109'\n/\n*/\nmodule.exports = function calcHash(query, windowTkk) {\n  //\tSTEP 1: spread the the query char codes on a byte-array, 1-3 bytes per char\n  var bytesArray = transformQuery(query);\n\n  //\tSTEP 2: starting with TKK index, add the array from last step one-by-one, and do 2 rounds of shift+add/xor\n  var d = windowTkk.split(\".\");\n  var tkkIndex = Number(d[0]) || 0;\n  var tkkKey = Number(d[1]) || 0;\n\n  var encondingRound1 = bytesArray.reduce((acc, current) => {\n    acc += current;\n    return shiftLeftOrRightThenSumOrXor(acc, [\"+-a\", \"^+6\"]);\n  }, tkkIndex);\n\n  //\tSTEP 3: apply 3 rounds of shift+add/xor and XOR with they TKK key\n  var encondingRound2 =\n    shiftLeftOrRightThenSumOrXor(encondingRound1, [\"+-3\", \"^+b\", \"+-f\"]) ^\n    tkkKey;\n\n  //\tSTEP 4: Normalize to 2s complement & format\n  var normalizedResult = normalizeHash(encondingRound2);\n\n  return normalizedResult.toString() + \".\" + (normalizedResult ^ tkkIndex);\n}\n","import { useEffect, useState } from \"preact/hooks\";\n\nimport calcHash from \"./tkk-hash\";\n\nconst tkk_url =\n  \"https://young-dawn-42521.herokuapp.com/translate-proxy/get-tkk\";\nlet ls;\nif (typeof window !== \"undefined\") {\n  ls = window.localStorage;\n}\n\nasync function getTkk(setTkk) {\n  var response = await fetch(tkk_url, {\n    method: \"GET\"\n  });\n\n  if (!response.ok) {\n    throw new Error(`HTTP error! status: ${response.status}`);\n  }\n\n  let { tkk } = await response.json();\n  ls.setItem(\"TKK\", tkk);\n  ls.setItem(\"TKK-timestamp\", new Date());\n  setTkk(tkk);\n}\n\nexport default function LanguageTools() {\n  let [search, setSearch] = useState(\"\");\n  let [tkk, setTkk] = useState(\"\");\n  let [googleWords, setGoogleWords] = useState([]);\n\n  useEffect(async () => {\n    if (\n      new Date().valueOf() - new Date(ls.getItem(\"TKK-timestamp\")).valueOf() >\n      3600000\n    ) {\n      getTkk(setTkk);\n    } else if (ls.getItem(\"TKK\")) {\n      setTkk(ls.getItem(\"TKK\"));\n    } else {\n      getTkk(setTkk);\n    }\n  });\n\n  return (\n    <div>\n      <input\n        type=\"text\"\n        value={search}\n        onInput={event => setSearch(event.target.value)}\n      />\n      <input\n        type=\"button\"\n        value=\"Search\"\n        onClick={async event => {\n          let encoded_search = encodeURIComponent(search);\n          let headers = new Headers();\n          headers.append(\"Origin\", \"https://translate.google.com\");\n          let response = await fetch(\n            `https://young-dawn-42521.herokuapp.com/translate-proxy/get-words?tk=${calcHash(\n              search,\n              tkk\n            )}&q=${encoded_search}`\n          );\n\n          let google_response = await response.json();\n\n          let words = [];\n          for (let pos of google_response[1]) {\n            words.push(pos);\n          }\n          setGoogleWords(words);\n        }}\n      />\n      <input type=\"button\" value=\"get tkk\" onClick={() => getTkk(setTkk)} />\n      <h2>Google Translate</h2>\n      {googleWords.map(function(pos) {\n        return (\n          <div>\n            <h3>{pos[0]}</h3>\n            {pos[2].map(function(word) {\n              let frequency = word[3];\n              if (frequency > 0.05) {\n                frequency = \"common\";\n              } else if (frequency > 0.01) {\n                frequency = \"uncommon\";\n              } else {\n                frequency = \"rare\";\n              }\n              return (\n                <p>\n                  {word[0]} - {frequency}\n                </p>\n              );\n            })}\n          </div>\n        );\n      })}\n    </div>\n  );\n}\n"],"sourceRoot":""}